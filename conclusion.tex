\part{Discussion and conclusion}
\label{pa:conclusion}
\chapter{Discussion}
\section{Network handling}
If the whole network could receive a change in a single aspect that would make
for a better network to rank clusters in, it would be the direction of the
edges. The ranking algorithms used can all come to useful results with
undirected edges, but directed edges take better advantage of how \gls{pr},
\gls{prwp}, \gls{hits} are meant to be used.

\subsection{Clustering}
The clusters could to a greater degree have been filtered more strictly. The
average cluster size was around 8.8 nodes (Table \ref{tab:mcl-inflation}), the
biggest cluster consisted if over 900 nodes, and the smallest ones were 2.0 
nodes in size. Removing the smaller clusters with only 2 genes has been done by
other researchers because of the low likeliness of a protein complex with only
2 genes to have a significant impact on disease status. The biggest cluster
might also be removed due to its large size when compared to the average. Such
a large cluster has a good chance of not being realistically compartmentalized
into a protein complex, and can skew the results in either the direction of
false positives or false negatives.

\subsection{Ranking}
Ranking the cluster-created network could have been done instead of or
complimentary to the network which only received cluster attributes as a sign
of clustering, and had no perturbation of the edges as a result of clustering.

Adjusting the alpha parameter of \gls{prwp} to higher values as 0.8 instead of 0.3 would also
give interesting information. Had the cross-validation with \gls{prwp} 
been done with 0.8, and resulted in a linear regression fit
(Figure \ref{fig:irefweb-prwp}) that would have had a less descending trend of
candidate cancer genes throughout the cluster ranks, it would be significant
proof of the network structure having a bigger effect on the rankings than the
priors scores.

\chapter{Conclusion}
\section{Future work}
\subsection{General improvements}
I have used an undirected network, which is not the preferred type to use with
PageRank, but it works. An idea could be to use KEGG pathways\cite{kegg}, which
has the option of downloading directed networks of several types.
STRING\cite{str} also has some directed network information, together with
weights. Because of STRINGs size, utilizing a Neo4J database to perform the
ranking algorithms could be a better option than directly having Cytoscape do
all of the heavy computations.

In the future, maybe a database with complete protein complexes could exclude
the need for clustering and provide different ways of ranking them based on
query criteria.

Other ranking algorithms than PageRank could also have been used. There are
numerous variations based off of this well known algorithm, for example NetRank
and GeneRank\cite{netrank,generank}. Not all of these PageRank variants are
intended to be used with PPI networks, but they can in many cases be modified to
fit this specific purpose.

In Ranklust, the average score in the nodes becomes the cluster score. PageRank
was used to combine prior knowledge of cancer genes and network structure to
prioritize network biomarers in prostate cancer. Taking the structure of the
network in higher consideration and maybe consider the distance between the
nodes to have an effect on the result could be a contribution to the PageRank
algorithm. Also, going the other way and increase the significance of the prior
scores added to the nodes in the network could help to get a better segregated
result of which clusters are related to cancer and not. For example, PRWP used
an alpha value of 0.3 because of earlier experiments in ranking biological
networks with PageRank had good results with it. What if the alpha value was set
to 0.8 and give the prior scores in the node a higher degree of bias?

\subsection{Minor features to complement Ranklust/clusterMaker2}
A compiled list of all considered features and tweaks in the Ranklust
contribution to clusterMaker2

\begin{itemize}
    \item User can specify what direction the ranking algorithm should consider
        for the graph
\end{itemize}

\subsection{Ranking through Neo4J}
ClusterMaker2 does every calculation within Cytoscape. There exists another way
of doing large and complex calculations, especially when it comes to algorithms
that focus on edge information in the network. CyNeo4j\cite{cyneo4j} is
a Cytoscape App that can realise this idea. It supports import/export of data
with a Neo4J\cite{neo4j} database. The original CyNeo4J Github-repository does
not support user authentication at the moment, but during the discussion about
what ranking algorithm should be used, Neo4J was an alternative. It resulted in
a git fork\cite{git-fork} of the CyNeo4J repository and simple user/password
authentication was added.

\subsection{Data communication}
Data communication between the Neo4J database server and the Cytoscape instance
is done through the CyNeo4J app to Cytoscape \cite{cyneo4j}. CyNeo4J is a
Cytoscape app that was developed during the Google Summer Code 2014 arrangement.
It supports connecting to a Neo4J instance, as well as syncing data up and down
from and to the database server. One thing it did not support was authentication
on Neo4J servers. Not having authentication is a serious problem, so we
implemented a simple way of getting access to the database server by providing a
possibility to insert username and password at the same time the user has to
provide a URL to the Neo4J database server instance. Implementation-wise, this
only required an extra header to be included in each http request going to the
password protected Neo4J database server instance. Every request used the static
\textbf{Request} class to Get/Post/Put HTTP requests to the Neo4J database
server instance. Except for creating the Auth64 encoded information, the
refactor looked something along these lines in all of the files.

Before:
\begin{lstlisting}[frame=single,language=Java]
Request req = Request.Post(url)
        .bodyString(call.getPayload(), ContentType.APPLICATION_JSON);
\end{lstlisting}

After:
\begin{lstlisting}[frame=single,language=Java]
Request req = Request.Post(url)
        .addHeader("Authorization", auth64EncodedInfo)
        .bodyString(call.getPayload(), ContentType.APPLICATION_JSON);
\end{lstlisting}

Synchronization time between Neo4J and Cytoscape through the CyNeo4J app is a
huge timesink. As of now, the time it takes to populate an empty Cytoscape
network with the gene information from STRING is about 2 hours, though on a slow
laptop. This could be shortened by exporting the Neo4J data with GraphML and
into Cytoscape. Because after the initial data is inside Cytoscape, updates to
the Neo4J instance goes much faster.

The CyNeo4J also uses a legacy HTTP library to get information from the Neo4J
database \cite{legacy-neo4j}. It is possible that the performance increases with
the new library \cite{transactional-neo4j}. The new library supports creating
transactions, which implicit gives support for rollbacks in case something goes
wrong with the query.

A future improvement to the CyNeo4J app could be to change the communication
between Neo4J and Cytoscape to be done in GraphML and not Cypher. This is
because through this whole process of importing and exporting data from and to
Neo4J, GraphML has shown itself to be a superior format over Cypher. Though, to
this day, direct queries to a running Neo4J instance has to be done in Cypher,
and is not possible in GraphML.

\section{Final results from identifying and prioritizing network biomarkers in prostate cancer}
In the three unique clusters that had the topmost ranks in the results from
testing \gls{prwp} and \gls{maa} against several data test sources related to
prostate cancer, every gene in these clusters was related to cancer, except for
1, PRTN3. \gls{maa} ranked the cluster that contained PRTN3 higher than clusters
where all of the genes were related to cancer, when checked in the \gls{jensen}
database. 
